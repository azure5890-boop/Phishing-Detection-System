<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Phishing Detection System</title>

<link rel="stylesheet" href="/static/style.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body data-theme="dark">

<header>
    <nav class="navbar">
        <div class="logo">üõ°Ô∏è Phishing Detector</div>
        <ul class="nav-links">
            <li><a href="/"><i class="bi bi-house"></i> Home</a></li>
            <li><a href="/cookies"><i class="bi bi-cookie"></i> Cookies</a></li>
            <li>
                <a href="javascript:void(0);" id="darkModeToggle" title="Toggle dark mode">
                    <i class="bi bi-moon" id="darkIcon"></i>
                </a>
            </li>
        </ul>
    </nav>
</header>

<main class="container">

    <section class="hero">
        <h1>Phishing Detection System</h1>
        <p>AI + Security Rules + Cookie Analysis</p>
    </section>

    <!-- üîé SCANNER SECTION -->
    <section class="scanner">

        <!-- ‚≠ê LAST SCANNED URL -->
        {% if last_url %}
        <div class="last-scanned-inline">
            üîé <strong>Last scanned:</strong>
            <span title="{{ last_url }}">{{ last_url }}</span>
        </div>
        {% endif %}

        <form action="/check" method="post">
            <input type="url" name="url" placeholder="https://example.com" required>
            <button type="submit">Analyze URL</button>
        </form>
    </section>

    {% if is_phish is not none %}
    <div class="results-grid">

        <!-- TRUST SCORE -->
        <div class="card score-card">
            <h3><i class="bi bi-shield-check"></i> Trust Score</h3>
            <div class="circle-wrapper">
                <svg class="progress-ring" width="140" height="140">
                    <circle class="bg" cx="70" cy="70" r="60"></circle>
                    <circle class="progress" cx="70" cy="70" r="60" data-score="{{ prob }}"></circle>
                </svg>
                <div class="circle-text">
                    <span id="scoreValue">0%</span>
                </div>
            </div>
            <p class="verdict">
                {% if prob < 40 %}üö® High Risk{% elif prob < 70 %}‚ö†Ô∏è Suspicious{% else %}‚úÖ Safe{% endif %}
            </p>
        </div>

        <!-- RISK METER -->
        <div class="card risk-card">
            <h3><i class="bi bi-shield-exclamation"></i> Risk Level</h3>
            <div class="risk-meter">
                <div class="fill" id="riskFill"></div>
            </div>
            <div style="text-align:center; margin-top:4px;">
                <span id="riskValue">0</span> / 10
            </div>
            <small>Lower is safer ¬∑ Higher is dangerous</small>
        </div>

        <!-- GRAPH CARD -->
        <div class="card graph-card">
            <h3><i class="bi bi-bar-chart"></i> Security Signals</h3>
            <div class="bar">
                <span>ML Confidence</span>
                <div class="progress">
                    <div class="fill" style="--width: {{ prob }}%"></div>
                </div>
            </div>
            <div class="bar">
                <span>Rule Based Risk</span>
                <div class="progress red">
                    <div class="fill" style="--width: {{ 100 - prob }}%"></div>
                </div>
            </div>
        </div>

        <!-- REASONS CARD -->
        <div class="card reasons-card">
            <h3><i class="bi bi-info-circle"></i> Detection Reasons</h3>
            {% if reasons %}
            <ul>
                {% for r in reasons %}
                <li>‚ö†Ô∏è {{ r }}</li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No suspicious indicators found</p>
            {% endif %}
        </div>

    </div>
    {% endif %}

</main>

<footer>
    <p>¬© 2026 Phishing Detection System. All Rights Are Reserved.</p>
</footer>

<script src="/static/script.js"></script>
</body>
</html>
